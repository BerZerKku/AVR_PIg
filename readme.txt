Меню для АВАНтов в новом исполнении.
Прогрмамма универсальная. Изначально с блока БСП считывается текущая версия
аппарата и затем происходит настройка меню.

////////////////////////////////////////////////////////////////////////////////
1.19
Можно использовать с Р400м, РЗСК, К400, ОПТИКА (К400 и Р400).
К400 и РЗСК работают с 2-х и 3-х концевыми линиями. Работу Р400М в 3-х концевом варианте надо проверять (в совместимости с ЛИНИЯ-Р все нормально). 
ОПТИКА надо проверять!!!

Известные проблемы:
	Протокол МЭК-101 работает только с теми прошивками, где время возвращается с миллисекундами. Иначе работа протокола встает на команде синхронизации!
ВСЕ: 
	Протокол МЭК-101 не поддерживает команд класса 1(2) и проверен полноастью только в К400.
	Протокол MODBUS частично проверен только для К400.

Изменения:
---> 12.01.2015
	В ОПТИКА:
	- состояние защиты 9 изменено на "Нет КС";
	- клавиатура при наличии только поста используется от Р400м, если есть еще команды РЗСК, если поста нет то К400.
---> 11.01.2015
	В ОПТИКА:
	- в журнале защиты не выводится состояние;
	- в Управление добавлен Пуск удаленного, при наличии защиты;
	- из журналов событий убраны записи 21 и 22, т.к. дублировались ("Нет КС" и "Нет КС 5 сек");
	- параметр "Сетевой адрес" можно менять в любом режиме.
---> 30.12.2015
	В ОПТИКА:
	- неисправность защиты 0х0010 изменена на "Нет КС";
	- заменены записи в журнале событий ОПТИКи 19 "Неиспр цепи вых.", 21 "Нет КС", 26 "Нет КС"
---> 29.12.2015
	Переделана работа с клавиатурой, теперь выбор раскладки под нужный тип аппарата устанавливается функцией vKEYset в setDeviceXXX.
	Добавлена поддержка ОПТИКА Р400:
	- ОПТИКА Р400 определяется, если линия ОПТИКА и тип аппарата Р400;
	- добавлена обработка принятой записи журнала Защиты;
	- добавлен пуск наладочный при наличии защиты в меню управление;
	- добавлены параметры защиты, при этом Перекрытие импульсов 0..54 с шагом 1, Компенсация задержки 0..18 с шагом 1 (в ВЧ шаг 2);
	- в Тест передатчика добавлен сигнал РЗ при наличии защиты.


////////////////////////////////////////////////////////////////////////////////
1.18
Можно использовать с Р400м, РЗСК, К400, ОПТИКА.
К400 и РЗСК работают с 2-х и 3-х концевыми линиями. Работу Р400М в 3-х концевом варианте надо проверять (в совместимости с ЛИНИЯ-Р все нормально).
ОПТИКА надо проверять!!!

Известные проблемы:
	Пока нет.
ВСЕ: 
	Протокол МЭК-101 не поддерживает команд класса 1(2) и проверен только в К400.
	Протокол MODBUS частично проверен только для К400.
	
Изменения:
---> 07.12.2015
	В К400 оптике исправлены все КЧ на КС, кроме Тест-ов.

---> 24.11.2015
	В Информации MCU заменен на МК, DSP на ЦСП.
	У общих параметров "уровень срабатывания аварийной сигнализации по D" и "уровень срабатывания предупредительной сигнализации по D" минимум изменен на -64.
	Сделана возможность ввода отрицательных значений параметров.
	При вводе нового значения параметра убрана проверка на количество вводимых символов.
	Исправлена ошибка обработки принятого значения для битовых параметров.
	Исправлена ошибка формирования меню Управления при ошибочном значении типа линии в РЗСК. Теперь по-умолчанию будут "Пуск налад.", "Сброс своего" и "Вызов".

---> 19.11.2015
	В К400 Оптика добавлено событие 4 "Кольцо нарушено"
	В К400 Оптика исправлен ввод параметра Резервирование.
	В К400 ВЧ добавлены два общих параметра "Уровень срабатывания предупредительной сигнализации по D" и "Уровень срабатывания аварийной сигнализации по D", но пока только от 0 до 64 дБ. А нужно от -64 дБ.
	В К400 ВЧ добавлен новый измеряемый параметр "Запас по тестовой команде" / "Отношение сигнал/помеха" для двухчастотного/одночастотного варианта. Выводится на экран параллельно с Uш. Считывается вместо Uз.
	В протоколе общения с БСП исправлена обработка принятой команды опроса. Теперь автоматически определяется смещение текущего параметра в принятой посылке.
	В К400 Оптика в состояниях "КЧ" подменяется на "КС". Теперь две записи состояний обновляется при обновлении типа аппарата.
	В К400 добавлены: новая неисправность ПРМ 0х08 "Низкий уровень D", предупреждение ПРМ 0х08 "Низкий уровень D", записи в журнале 16 "Восстановление D", 14 "Предупреждение по D", 13 "Авария по D".
---> 15.10.2015
	В Р400м добавлено новое состояние с кодом 13 для ЗАЩ\ПРМ\ПРД "Упр. ТМ".
	В Р400м поочередно сменяют друг друга показания Sd и Uш.
	Для всех аппаратов изменен алгоритм включения подсветки. Теперь она будет включаться при любом отклонении от "нормального" состояния аппарата.
	Исправлен ввод коррекции при наличии ошибки, теперь ее нужно сначала сбросить в 0.
	

////////////////////////////////////////////////////////////////////////////////
1.17
Можно использовать с Р400м, РЗСК, К400, ОПТИКА.
К400 и РЗСК работают с 2-х и 3-х концевыми линиями. Работу Р400М в 3-х концевом
варианте надо проверять (в совместимости с ЛИНИЯ-Р все нормально).
ОПТИКА надо проверять!!!

Известные проблемы:
	Пока нет.
ВСЕ: 
	Протокол МЭК-101 не поддерживает команд класса 1(2) и проверен только в К400.
	Протокол MODBUS частично проверен только для К400.
	
Изменения:
---> 15.09.2015
	Изменен порядок настройки интерфейса связи по локальной сети.
	Приведены впорядок неисправности и журнал событий для К400 ВЧ.
	Минимальное значение для КОличество команд передатчика изменено с 0 на 4.
	Исправлен размер буфера для передачи команд в БСП с 8 на 16 байт.
	В команде установки времени GB_COM_SET_TIME добавлен 9-ый байт данных, равный 0 при установке с меню/конфигуратора или 1 если установка идет по АСУ ТП.
	В МЭК-101 добавлены сигналы режимов работы приемника и передатчика.
	Увеличино время ожидания смены режима протокола при работе с БСП, для увеличения кол-ва возможных байт передаваемых в БСП.
---> 16.09.2015
	Исправлена работа с быстрыми командами. Теперь под каждую создается отдельный буфер данных. И из-за этого изменена отправка команд в тесте передатчика.
	Исправлено изменение режима работы, ранее всегда показывалось "Выведен". Хотя при этом аппаратура нормально вводилась в работу.
	Исправлен шаблон для МЭК-101 К400.
---> 17.09.2015
	Исправлена проблема ввода нового занчения для коррекции тока и напряжении в момент обнаружения ошибки в данном параметре.
	Общий параметр "Телемеханика" К400 присутствует во всех совместимостях.
---> 18.09.2015
	В К400 общий параметр "Контроль вых.сигнала" виден всегда, даже в чистом приемнике.
---> 09.10.2015
	В РЗСК приведены в порядок неисправности и предупреждения.



////////////////////////////////////////////////////////////////////////////////
1.16
Можно использовать с Р400м, РЗСК, К400, ОПТИКА.
К400 и РЗСК работают с 2-х и 3-х концевыми линиями. Работу Р400М в 3-х концевом
варианте надо проверять (в совместимости с ЛИНИЯ-Р все нормально).

Известные проблемы:
	Пока нет.
ВСЕ: 
	Нет протокола МЭК-101.
	Протокол MODBUS частично проверен только для К400.
	
Изменения:
---> 07.04.2015
	Изменена работа с параметрами. Теперь при получении ошибочного значения на дисплей будет выведено сообщение "ошибка!!!", а если парараметр еще не считан "чтение..".
	Исправлена ошибка добавления быстрых команд, из-за чего нельзя было установить сигналы РЗ в Тест передатчика.
---> 10.08.2015	
	В Р400м команда управления "АК пуск" отправляется с кодом 7.
	В управлении убран "Вызов" из совместимостей ПВЗ-90 и АВЗК-80. Код пуска с 
	кнопки подменяется на 7.
	Неисправность защиты "Длит. помеха" заменена на "Помеха в линии".
	В совместимости с ПВЗ-90 и АВЗК-80 вместо "АК-бегл" выводится "АК-пров".
	В журналах событий для Р400 записи 26 и 29 заменены на "Помеха в линии" и "Уд: Помеха в линии".
	Переделана отправка команд в БСП. Теперь время до АК должно выводиться номрмально.
---> 17.08.2015
	Исправлен код команды управления "АК контр. проверка" с 7 на 6.
	Исправлен опрос команд группы 1.
	
	
////////////////////////////////////////////////////////////////////////////////
1.15
Можно использовать с Р400м, РЗСК, К400, ОПТИКА.
К400 и РЗСК работают с 2-х и 3-х концевыми линиями. Работу Р400М в 3-х концевом
варианте надо проверять (в совместимости с ЛИНИЯ-Р все нормально).

Известные проблемы:
	Передается только одна быстрая команда. Как следствие в "Тест передатчика" нет возможности установить сигналы РЗ (тянется с 1.14)
ВСЕ: 
	Нет протокола МЭК-101.
	Протокол MODBUS частично проверен только для К400.
	
Изменения:
-->	04.02.2015
	Добавлены общие параметры "Период беглого режима АК" и "Период повтора беглого режима АК" для Р400М, своместимость с ПВЗУ-Е.

////////////////////////////////////////////////////////////////////////////////
1.14
Можно использовать с Р400м, РЗСК, К400, ОПТИКА.
К400 и РЗСК работают с 2-х и 3-х концевыми линиями. Работу Р400М в 3-х концевом
варианте надо проверять (в совместимости с ЛИНИЯ-Р все нормально).

Ивестные проблемы: 
	Передается только одна быстрая команда. Как следствие в "Тест передатчика" нет возможности установить сигналы РЗ.
ВСЕ: 
	Нет протокола МЭК-101.
	Протокол MODBUS частично проверен только для К400.
	
Изменения:
--> 16.12.2014
	В журналы оптики добавлены записи 31 и 32 (изменение даты/времени и параметров).
--> 15.12.2014
	Исправлен диапазон параметра "Длительность команды" на 30..100мс в ВЧ варианте и 30..500 в Оптике.
-->	27.11.2014
	Исправлена ошибка работы станартного протокола по RS-485.
-->	26.11.2014
	Диапазон параметра приемника "Задержка на фиксацию приемка команд" изменен на 0..5 мс. 
	Исправлена работа uart. Теперь при вызове TUart::trData с 0 кол-вом байт данных, не происходит сброса текущей передачи. Что мешало работать MODBUS т.к. обрывало незавершенную посылку каждый цикл (сказалось на частотах ниже 4800).
	Диапазон ввода параметра передатчика "Количество команд А" изменен на 0..(кол-во команд передатчика).
-->	24.11.2014
	Исправлена работа интерфейса. 
	Добавлена установка сетевого интерфейса для протокола MODBUS.
	Диапазон изменения пар-ра "Сетевой адрес" изменен на 1..247.
	Общий параметр "Сетевой адрес" перенесен во вкладку "Интерфейс".
--> 23.11.2014
	Убрана ошибка отображении записей журнала, во время его считывания с ПК. 
-->	21.11.2014
	Добавлен общий параметр для К400 в совместимости УПКЦ-ПРД "Телемеханика".
	Исправлена настройка интерфеса связи. 
	Исправлено считывание значений индикации на блоке БСП.
-->	20.11.2014
	Исправлена работа с интерфейсами.
	Добавлены команды считывания совместимости в стартовый уровень и параметры передатчика для К400.
	Переделано переконфигурирование меню на лету.
-->	19.11.2014
	Объеденены версии 1.12 и 1.13.
	
////////////////////////////////////////////////////////////////////////////////
1.13
Можно использовать с Р400м, РЗСК, К400, ОПТИКА.
К400 и РЗСК работают с 2-х и 3-х концевыми линиями. Работу Р400М в 3-х концевом
варианте надо проверять (в совместимости с ЛИНИЯ-Р все нормально).

Ивестные проблемы: 
ВСЕ: 
	Отсутствуют протоколы для АСУТП.

Изменения:
---> 07.11.2014 В Р400М убраны параметры "Перекрытие импульсов" и "Компенсация задержки". Вместо них добавлены "Сдвиг пер.фронта ПРД", "Сдвиг зад.фронта ПРД", "Сдвиг ПРМ", "Сдвиг ВЧ ПРД от ПУСК". для них использовона команда от "Перекрытие импульсов".
	

////////////////////////////////////////////////////////////////////////////////
1.12
Можно использовать с Р400м, РЗСК, К400, ОПТИКА.
К400 и РЗСК работают с 2-х и 3-х концевыми линиями. Работу Р400М в 3-х концевом
варианте надо проверять (в совместимости с ЛИНИЯ-Р все нормально).

Ивестные проблемы: 
ВСЕ: 
	Прошивка сделана в основном только для 2-х концевых линий.
	Нет протокола МЭК-101.
	Протокол MODBUS частично проверен только для К400.
	
Изменения:
--> 18.11.2014 
	Добавлены параметры кол-ва команд ПРМ и ПРД.
-->	06.11.2014 Исправлено определение типа аппарата в команде 0x3F.
	Исправлено определение типа аппарата при смене прошивки на лету.
	Исправлены записи журнала событий К400.
--> 18.09.2014 Доделана сомвестимость ЛИНИЯ-Р в Р400М.
	В РЗСК исправлены Тест1 и Управление в варианте без Поста.
	Исправлено определение версии, при перепрошивке БСП на другой тип аппарата.
-->	12.09.2014 В Р400м совместимость ЛинияР при выводе на экран в стартовом меню
	навзание "АК-норм" подменяется на "АК-авто".
-->	В 3-х концевом РЗСК в стартовом меню поочередно выводятся показания Uk,з,ш.
	Для 3-х концевого РЗСК в Тест2 добавлены сигналы второго приемника.
	В РЗСК добавлены общие параметры: Частота, Номер аппарата.
	Для 3-х концевого РЗСК общий параметр "Загрубление чувст. ПРМ" и 
	параметр защиты "Загрубление чувств. РЗ" устанавливаются отдельно для 
	каждой линии.
	Для 3-х концевого РЗСК сделано меню Управление. А с кнопки посылается
	команда "Пуск Удаленных".
	Добавлено отображение версии ПЛИС БСЗ.
	Изменены архивы событий в РЗСК. Добавлено определение версии аппарата в 
	команде запроса информации.
	Параметр "Тип линии" в РЗСК перенесен из параметров Защиты в Общие.
	В Р400М добавлена совместимость ЛИНИЯ-Р. Добавлено определение версии 
	аппарата в команде запроса информации. Для него исправлены меню Управление,
	Тест 1. В Тестах вместо КЧ будет во всех совместимостях писаться КЧ1.
	Для К400 добавлен параметр "Совместимость".
	Для MODBUS доделано считывание регистров/флагов индикации блока БСК.

////////////////////////////////////////////////////////////////////////////////
1.11
Можно использовать с Р400м, РЗСК, К400, ОПТИКА.

Ивестные проблемы: 
ВСЕ: 
	Прошивка сделана только для 2-х концевых линий.
	Отсутствуют протоколы для АСУТП.

Изменения:
	При включении выводится надпись "Инициализация." Если в течении 5 секунд
	не получен ответ о типе аппарата, выводится надпись "Тип аппарата не 
	определен!!!".
	В тесты РЗСК добавлены КЧ2 + блок и КЧ2 без блок.
	Сделана 3-х концевая версия К400 для Оренбурга (в том числе ЦПП).
	
////////////////////////////////////////////////////////////////////////////////
1.10
Можно использовать с Р400м, РЗСК, К400, ОПТИКА.

Ивестные проблемы: 
ВСЕ: 
	Прошивка сделана только для 2-х концевых линий.
	Отсутствуют протоколы для АСУТП.

Изменения:
	Исправлена нерабочая команда управления "АК включить" для Р400м в
	совместимости с ПВЗЛ. 
	
////////////////////////////////////////////////////////////////////////////////
1.09
Можно использовать с Р400м, РЗСК, К400, ОПТИКА.

Ивестные проблемы:
Р400м 
	в совместимости с ПВЗЛ не работает команда управления "АК включить". 
ВСЕ: 
	Прошивка сделана только для 2-х концевых линий.
	Отсутствуют протоколы для АСУТП.

Изменения:
	Переделан порядок сканирования сигналов в Тест1, т.к. изменился формат 
	ответа в РЗСК (мега БСП 1.22 -> сигнал КЧ присутствует при любой команде).
	Доделаны Тесты для 32-х командного варианта ОПТИКА.
	
////////////////////////////////////////////////////////////////////////////////
1.08
Можно использовать с Р400м, РЗСК, К400, Оптикой.

Ивестные проблемы:
ВСЕ: 
	Прошивка сделана только для 2-х концевых линий.
ОПТИКА:
	Сделана и проверена с Приемником и Передатчиком по 8 команд.

Изменения:
	Доделаны команды меню управления "АК-беглый", "АК-контр.проверка", 
	"Пуск удален. МАН", "АК-испытания" в совместимостях Р400м.

////////////////////////////////////////////////////////////////////////////////
1.07
Можно использовать с Р400м, РЗСК, К400, Оптикой.
 
Ивестные проблемы:
ВСЕ: 
	Прошивка сделана только для 2-х концевых линий.
Р400м:
	В совместимостях Р400м не работают команды "АК-беглый", "АК-контр.проверка",
	"Пуск удален. МАН", "АК-испытания".
ОПТИКА:
	Сделана и проверена с Приемником и Передатчиком по 8 команд.
	
Изменения:
В К400 убран вывод Uз в Тест2.
Название общего параметра "Уменьшение усиления ПРМ" изменилось на "Загрубление
чувствительности приемника".
Название параметра защиты "Загрубление чувствительности" изменилось на 
"Загрубление чувствительности РЗ".
Исправлен ввод даты и времени. Теперь при вводе месяца и года осуществляется
проверка на корректность даты.
Исправлен ввод коррекции в К400 и РЗСК.

////////////////////////////////////////////////////////////////////////////////
1.06
Можно использовать с Р400м, РЗСК, К400, Оптикой.
 
Ивестные проблемы:
ВСЕ: 
	Прошивка сделана только для 2-х концевых линий.
	При вводе даты, возможна ошибка если сначала установлен день, а потом месяц 
	с меньшим кол-вом дней.
К400: 
	Не работает Тест1 - под вопросом, надо проверить.
ОПТИКА:
	Сделана и проверена с Приемником и Передатчиком по 8 команд.
	
Изменения:
Вывод версий прошивок ПЛИС.
Исправлена ошибка смены Совместимости при переходе в пункт Тест.
В К400 убран параметр "Совместимость".
Сделано ускорение ввода новых значений параметров, при длительном нажатии.
При смене режима работы пароль запрашивается после выбора нужного режима.

////////////////////////////////////////////////////////////////////////////////
1.05
Можно использовать с Р400м, РЗСК, К400, Оптикой.
 
Ивестные проблемы:
ВСЕ: 
	Прошивка сделана только для 2-х концевых линий.
К400: 
	Не работает Тест1 - под вопросом, надо проверить.
ОПТИКА:
	Сделана и проверена с Приемником и Передатчиком по 8 команд.
	 
////////////////////////////////////////////////////////////////////////////////
1.04
Можно использовать с Р400м, РЗСК, К400 для 2-х концевых линий.
 
Ивестные проблемы:
ВСЕ: 
	Прошивка сделана только для 2-х концевых линий.
К400: 
	Не работает Тест1.
РЗСК:
	Могут быть проблемы с журналом. 
////////////////////////////////////////////////////////////////////////////////
	
